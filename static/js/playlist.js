!function(){"use strict";var e,t={378:function(e,t,i){i.d(t,{w:function(){return m}});var a=i(5602),l=i(5762),n=i.n(l),s=i(8429),r=i(8355),o=i(4833),d=i(3707),u=i(4681),c=i(549);function m(e){const t=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(null),n=(0,a.useRef)(null),[m,p]=(0,a.useState)(e.id||null),[h,y]=(0,a.useState)(e.id?d.A.get("title"):""),[f,g]=(0,a.useState)(e.id?d.A.get("description"):""),[b,v]=(0,a.useState)(-1);function E(t){setTimeout((function(){s.z8("Playlist created","playlistCreationCompleted");const i={playlist_id:function(e){let t=e.split("/");return 1<t.length?t[t.length-1]:null}(t.url),add_date:t.add_date,description:t.description,title:t.title,media_list:[]};e.onPlaylistSave(i)}),100)}function P(){setTimeout((function(){s.z8("Playlist creation failed","playlistCreationFailed")}),100)}return(0,a.useEffect)((()=>(r.A.on("playlist_creation_completed",E),r.A.on("playlist_creation_failed",P),i.current.focus(),()=>{r.A.removeListener("playlist_creation_completed",E),r.A.removeListener("playlist_creation_failed",P)})),[]),a.createElement("div",{className:"playlist-form-wrap"},a.createElement("div",{className:"playlist-form-field playlist-title",ref:t},a.createElement("span",{className:"playlist-form-label"},"Title"),a.createElement("input",{ref:i,type:"text",placeholder:"Enter playlist title...",value:h,onChange:function(){y(i.current.value)},onFocus:function(){(0,c.zc)(t.current,"focused")},onBlur:function(){(0,c.qk)(t.current,"focused")},onClick:function(){(0,c.qk)(t.current,"invalid")}})),a.createElement("div",{className:"playlist-form-field playlist-description",ref:l},a.createElement("span",{className:"playlist-form-label"},"Description"),a.createElement("textarea",{ref:n,rows:"1",placeholder:"Enter playlist description...",value:f,onChange:function(){n.current.style.height="";const e=n.current.scrollHeight-2,t=0<b?b:parseFloat(window.getComputedStyle(n.current).lineHeight);n.current.style.height=3+Math.max(21,t*Math.floor(e/t))+"px",v(t),g(n.current.value)},onFocus:function(){(0,c.zc)(l.current,"focused")},onBlur:function(){(0,c.qk)(l.current,"focused")}})),a.createElement("div",{className:"playlist-form-actions"},a.createElement("button",{className:"cancel-btn",onClick:function(){e.onCancel()}},"CANCEL"),a.createElement("button",{className:"create-btn",onClick:function(){let e=i.current.value.trim();if(""!==e){let t=n.current.value.trim();m?u.i5({title:e,description:t}):o.createPlaylist({title:e,description:t})}else(0,c.zc)(t.current,"invalid")}},m?"UPDATE":"CREATE")))}m.propTypes={id:n().string,onCancel:n().func.isRequired,onPlaylistSave:n().func.isRequired}},549:function(e,t,i){function a(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}function l(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function n(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function s(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}i.d(t,{CX:function(){return s},kN:function(){return a},qk:function(){return l},zc:function(){return n}})},623:function(e,t,i){i.d(t,{Z:function(){return l}});var a=i(5602);const l=e=>{let{type:t}=e;return t?a.createElement("i",{className:"material-icons","data-icon":t}):null}},988:function(e,t,i){i.d(t,{A:function(){return l}});var a=i(2958);function l(e,t){if(e instanceof Date)switch(t=0<(t=0+t)?t:1){case 1:return a.A[e.getMonth()].substring(0,3)+" "+e.getDate()+", "+e.getFullYear();case 2:return e.getDate()+" "+a.A[e.getMonth()].substring(0,3)+" "+e.getFullYear();case 3:return e.getDate()+" "+a.A[e.getMonth()]+" "+e.getFullYear()}return null}},1653:function(e,t,i){i.d(t,{Y:function(){return r}});var a=i(5602),l=(i(3203),i(8429));i(1724),i(670);var n=i(6252),s=i(7487);class r extends a.PureComponent{constructor(e,t){super(e),void 0!==t&&l.oh(t)}render(){return a.createElement(a.Fragment,null,a.createElement(n.A,null,this.pageContent()),a.createElement(s.$,null))}}},1724:function(e,t,i){i.d(t,{q:function(){return s}});var a=i(5602),l=i(5909);const n=a.createContext((0,l.$)(window.MediaCMS).site),s=n.Consumer;t.A=n},2958:function(e,t){t.A=["January","February","March","April","May","June","July","August","September","October","November","December"]},3707:function(e,t,i){var a=i(5602),l=i(497),n=i.n(l),s=(i(6415),i(4443)),r=i(5909);i(863);const o={};class d extends(n()){constructor(){super(),this.mediacms_config=(0,r.$)(window.MediaCMS),o[Object.defineProperty(this,"id",{value:"PlaylistPageStoreData_"+Object.keys(o).length}).id]={playlistId:null,data:{}},this.data={savedPlaylist:!1,publishDate:new Date(2018,3,14,1,13,22,0),publishDateLabel:null},this.onPlaylistUpdateCompleted=this.onPlaylistUpdateCompleted.bind(this),this.onPlaylistUpdateFailed=this.onPlaylistUpdateFailed.bind(this),this.onPlaylistRemovalCompleted=this.onPlaylistRemovalCompleted.bind(this),this.onPlaylistRemovalFailed=this.onPlaylistRemovalFailed.bind(this)}loadData(){if(!o[this.id].playlistId)return console.warn("Invalid playlist id:",o[this.id].playlistId),!1;this.playlistAPIUrl=this.mediacms_config.api.playlists+"/"+o[this.id].playlistId,this.dataResponse=this.dataResponse.bind(this),this.dataErrorResponse=this.dataErrorResponse.bind(this),(0,s.iq)(this.playlistAPIUrl,!1,this.dataResponse,this.dataErrorResponse)}dataResponse(e){e&&e.data&&(o[this.id].data=e.data,this.emit("loaded_playlist_data"))}dataErrorResponse(e){this.emit("loaded_playlist_error"),e.type}get(e){switch(e){case"playlistId":return o[this.id].playlistId||null;case"logged-in-user-playlist":return!this.mediacms_config.member.is.anonymous&&o[this.id].data.user===this.mediacms_config.member.username;case"playlist-media":return o[this.id].data.playlist_media||[];case"visibility":return"public";case"visibility-icon":switch(this.get("visibility")){case"unlisted":return a.createElement("i",{className:"material-icons"},"insert_link");case"private":return a.createElement("i",{className:"material-icons"},"lock")}return null;case"total-items":return o[this.id].data.playlist_media.length||0;case"views-count":return"N/A";case"title":return o[this.id].data.title||null;case"edit-link":return"#";case"thumb":return o[this.id].data.playlist_media&&o[this.id].data.playlist_media.length?o[this.id].data.playlist_media[0].thumbnail_url:null;case"description":return o[this.id].data.description||null;case"author-username":case"author-name":return o[this.id].data.user||null;case"author-link":return o[this.id].data.user?this.mediacms_config.site.url+"/user/"+o[this.id].data.user:null;case"author-thumb":return o[this.id].data.user_thumbnail_url?this.mediacms_config.site.url+"/"+o[this.id].data.user_thumbnail_url.replace(/^\//g,""):null;case"saved-playlist":return this.data.savedPlaylist;case"date-label":return o[this.id].data&&o[this.id].data.add_date?(this.data.publishDateLabel=this.data.publishDateLabel||"Created on "+(0,s.w$)(new Date(o[this.id].data.add_date),3),this.data.publishDateLabel):null}return null}onPlaylistUpdateCompleted(e){e&&e.data&&(o[this.id].data.title=e.data.title,o[this.id].data.description=e.data.description,this.emit("playlist_update_completed",e.data))}onPlaylistUpdateFailed(){this.emit("playlist_update_failed")}onPlaylistRemovalCompleted(e){e&&void 0!==e.status&&403!==e.status?this.emit("playlist_removal_completed",e):this.onPlaylistRemovalFailed()}onPlaylistRemovalFailed(){this.emit("playlist_removal_failed")}actions_handler(e){switch(e.type){case"LOAD_PLAYLIST_DATA":o[this.id].playlistId=window.MediaCMS.playlistId||((t=window.location.href.split("/")).length?t[t.length-1]:null),this.loadData();break;case"TOGGLE_SAVE":this.data.savedPlaylist=!this.data.savedPlaylist,this.emit("saved-updated");break;case"UPDATE_PLAYLIST":(0,s.MB)(this.playlistAPIUrl,{title:e.playlist_data.title,description:e.playlist_data.description},{headers:{"X-CSRFToken":(0,s.m5)()}},!1,this.onPlaylistUpdateCompleted,this.onPlaylistUpdateFailed);break;case"REMOVE_PLAYLIST":(0,s.Fb)(this.playlistAPIUrl,{headers:{"X-CSRFToken":(0,s.m5)()}},!1,this.onPlaylistRemovalCompleted,this.onPlaylistRemovalFailed);break;case"PLAYLIST_MEDIA_REORDERED":o[this.id].data.playlist_media=e.playlist_media,this.emit("reordered_media_in_playlist");break;case"MEDIA_REMOVED_FROM_PLAYLIST":const i=[];let a=0;for(;a<o[this.id].data.playlist_media.length;)e.media_id!==o[this.id].data.playlist_media[a].url.split("=")[1]&&i.push(o[this.id].data.playlist_media[a]),a+=1;o[this.id].data.playlist_media=i,this.emit("removed_media_from_playlist")}var t}}t.A=(0,s.ey)(new d,"actions_handler")},4098:function(e,t,i){var a=i(929);const l={};t.A=class{constructor(e){l[Object.defineProperty(this,"id",{value:"MediaDurationInfo_"+Object.keys(l).length}).id]={fn:{infoToString:function(e){return e<10?"0"+e:e}}},(0,a.tR)(e)&&this.update(e)}update(e){l[this.id].toString=void 0,l[this.id].ariaLabel=void 0,(0,a.tR)(e)&&(l[this.id].days=Math.floor(e/86400),l[this.id].seconds=e%86400,l[this.id].date=l[this.id].seconds?new Date(1e3*l[this.id].seconds):null,l[this.id].hours=l[this.id].date?24*l[this.id].days+l[this.id].date.getUTCHours():0,l[this.id].minutes=l[this.id].date?l[this.id].date.getUTCMinutes():0,l[this.id].seconds=l[this.id].date?l[this.id].date.getSeconds():0)}toString(){return void 0===l[this.id].toString&&(l[this.id].toString=(0<l[this.id].hours?l[this.id].hours+":":"")+(0<l[this.id].hours&&10>l[this.id].minutes?"0":"")+l[this.id].minutes+":"+l[this.id].fn.infoToString(l[this.id].seconds)),l[this.id].toString}ariaLabel(){if(void 0===l[this.id].ariaLabel){let e=[];0<l[this.id].hours&&e.push(l[this.id].hours+" hours"),0<l[this.id].minutes&&e.push(l[this.id].minutes+" minutes"),0<l[this.id].seconds&&e.push(l[this.id].seconds+" seconds"),l[this.id].ariaLabel=e.join(", ")}return l[this.id].ariaLabel}ISO8601(){return"P0Y0M0DT"+l[this.id].hours+"H"+l[this.id].minutes+"M"+l[this.id].seconds+"S"}}},4443:function(e,t,i){i.d(t,{Fb:function(){return s.A},MB:function(){return l.A},ZV:function(){return o.A},ey:function(){return r.A},gj:function(){return d.A},iq:function(){return a.A},m5:function(){return c.A},w$:function(){return u.A},zi:function(){return n.A}});var a=i(9702),l=i(8628),n=i(7449),s=i(1579),r=i(4340),o=i(6925),d=i(9804),u=(i(797),i(7974),i(988)),c=(i(8959),i(5252))},4681:function(e,t,i){i.d(t,{$M:function(){return o},DO:function(){return n},Sp:function(){return d},i5:function(){return s},tH:function(){return r}});var a=i(1700),l=i.n(a);function n(){l().dispatch({type:"LOAD_PLAYLIST_DATA"})}function s(e){l().dispatch({type:"UPDATE_PLAYLIST",playlist_data:e})}function r(){l().dispatch({type:"REMOVE_PLAYLIST"})}function o(e,t){l().dispatch({type:"MEDIA_REMOVED_FROM_PLAYLIST",media_id:e,playlist_id:t})}function d(e){l().dispatch({type:"PLAYLIST_MEDIA_REORDERED",playlist_media:e})}},4833:function(e,t,i){i.d(t,{createPlaylist:function(){return n}});var a=i(1700),l=i.n(a);function n(e){l().dispatch({type:"CREATE_PLAYLIST",playlist_data:e})}},6521:function(e,t,i){i.d(t,{L9:function(){return u}});var a=i(5602),l=i(5762),n=i.n(l),s=i(306),r=i.n(s),o=i(1581);function d(e,t){let i=r()(e,{});return""!==i.origin&&"null"!==i.origin&&i.origin||(i=r()(t+"/"+e.replace(/^\//g,""),{})),i.toString()}function u(e){const t=(0,a.useRef)(null);let i=null;const l={playerVolume:e.playerVolume,playerSoundMuted:e.playerSoundMuted,videoQuality:e.videoQuality,videoPlaybackSpeed:e.videoPlaybackSpeed,inTheaterMode:e.inTheaterMode};function n(){void 0!==e.onClickNextCallback&&e.onClickNextCallback()}function s(){void 0!==e.onClickPreviousCallback&&e.onClickPreviousCallback()}function r(t){l.playerVolume!==t.volume&&(l.playerVolume=t.volume),l.playerSoundMuted!==t.soundMuted&&(l.playerSoundMuted=t.soundMuted),l.videoQuality!==t.quality&&(l.videoQuality=t.quality),l.videoPlaybackSpeed!==t.playbackSpeed&&(l.videoPlaybackSpeed=t.playbackSpeed),l.inTheaterMode!==t.theaterMode&&(l.inTheaterMode=t.theaterMode),void 0!==e.onStateUpdateCallback&&e.onStateUpdateCallback(t)}function u(){if(null!==i||null!==e.errorMessage)return;if(e.inEmbed||(window.removeEventListener("focus",u),document.removeEventListener("visibilitychange",u)),!t.current)return;e.inEmbed||t.current.focus();const a={on:!1};if(void 0!==e.subtitlesInfo&&null!==e.subtitlesInfo&&e.subtitlesInfo.length){a.languages=[];let t=0;for(;t<e.subtitlesInfo.length;)void 0!==e.subtitlesInfo[t].src&&void 0!==e.subtitlesInfo[t].srclang&&void 0!==e.subtitlesInfo[t].label&&a.languages.push({src:d(e.subtitlesInfo[t].src,e.siteUrl),srclang:e.subtitlesInfo[t].srclang,label:e.subtitlesInfo[t].label}),t+=1;a.languages.length&&(a.on=!0)}const o=window["@mediacms/media-player"];i=new o(t.current,{enabledTouchControls:!0,sources:e.sources,poster:e.poster,autoplay:e.enableAutoplay,bigPlayButton:!0,controlBar:{theaterMode:e.hasTheaterMode,pictureInPicture:!1,next:!!e.hasNextLink,previous:!!e.hasPreviousLink},subtitles:a,cornerLayers:e.cornerLayers,videoPreviewThumb:e.previewSprite},{volume:l.playerVolume,soundMuted:l.playerSoundMuted,theaterMode:l.inTheaterMode,theSelectedQuality:void 0,theSelectedPlaybackSpeed:l.videoPlaybackSpeed||1},e.info,[.25,.5,.75,1,1.25,1.5,1.75,2],r,n,s),void 0!==e.onPlayerInitCallback&&e.onPlayerInitCallback(i,t.current)}return l.playerVolume=null===l.playerVolume?1:Math.max(Math.min(Number(l.playerVolume),1),0),l.playerSoundMuted=null!==l.playerSoundMuted&&l.playerSoundMuted,l.videoQuality=null!==l.videoQuality?l.videoQuality:"Auto",l.videoPlaybackSpeed=null!==l.videoPlaybackSpeed&&l.videoPlaybackSpeed,l.inTheaterMode=null!==l.inTheaterMode&&l.inTheaterMode,(0,a.useEffect)((()=>(e.inEmbed||document.hasFocus()||"visible"===document.visibilityState?u():(window.addEventListener("focus",u),document.addEventListener("visibilitychange",u)),()=>{null!==i&&((0,o.A)(t.current).dispose(),i=null),void 0!==e.onUnmountCallback&&e.onUnmountCallback()})),[]),null===e.errorMessage?a.createElement("video",{ref:t,className:"video-js vjs-mediacms native-dimensions"}):a.createElement("div",{className:"error-container"},a.createElement("div",{className:"error-container-inner"},a.createElement("span",{className:"icon-wrap"},a.createElement("i",{className:"material-icons"},"error_outline")),a.createElement("span",{className:"msg-wrap"},e.errorMessage)))}i(8017),n().string.isRequired,u.propTypes={playerVolume:n().string,playerSoundMuted:n().bool,videoQuality:n().string,videoPlaybackSpeed:n().number,inTheaterMode:n().bool,siteId:n().string.isRequired,siteUrl:n().string.isRequired,errorMessage:n().string,cornerLayers:n().object,subtitlesInfo:n().array.isRequired,inEmbed:n().bool.isRequired,sources:n().array.isRequired,info:n().object.isRequired,enableAutoplay:n().bool.isRequired,hasTheaterMode:n().bool.isRequired,hasNextLink:n().bool.isRequired,hasPreviousLink:n().bool.isRequired,poster:n().string,previewSprite:n().object,onClickPreviousCallback:n().func,onClickNextCallback:n().func,onPlayerInitCallback:n().func,onStateUpdateCallback:n().func,onUnmountCallback:n().func},u.defaultProps={errorMessage:null,cornerLayers:{}}},6680:function(e,t,i){i.d(t,{y:function(){return s}});var a=i(5602),l=i(5909);const n=a.createContext((0,l.$)(window.MediaCMS).url),s=n.Consumer;t.A=n},8282:function(e,t,i){var a=i(5602),l=i(5909);const n=a.createContext((0,l.$)(window.MediaCMS).api);n.Consumer,t.A=n},8429:function(e,t,i){i.d(t,{oh:function(){return n},z8:function(){return s}});var a=i(1700),l=i.n(a);function n(e){l().dispatch({type:"INIT_PAGE",page:e})}function s(e,t){l().dispatch({type:"ADD_NOTIFICATION",notification:e,notificationId:t})}},8856:function(e,t,i){var a=i(655),l=i(5602),n=(i(3203),i(9404)),s=i(1756),r=i(7236),o=i(8282),d=i(1653),u=i(8429),c=i(4681),m=i(3707),p=i(670),h=i(5762),y=i.n(h),f=i(1838);function g(e){return l.createElement(f.k,{items:e.media,playlistId:e.playlistId,hidePlaylistOptions:e.hidePlaylistOptions,singleLinkContent:!0,hideDate:!0,hideViews:!0,hidePlaylistOrderNumber:!1,horizontalItemsOrientation:!0,itemsCountCallback:e.itemsCountCallback,itemsLoadCallback:e.itemsLoadCallback,pageItems:99999,inPlaylistPage:!0})}g.propTypes={media:y().array.isRequired,playlistId:y().string.isRequired,itemsCountCallback:y().func,itemsLoadCallback:y().func,hidePlaylistOptions:y().bool},g.defaultProps={hidePlaylistOptions:!0};var b=i(3705),v=i(4443),E=i(623),P=i(3902),_=i(378),A=i(4397);function C(e){return e.media&&e.media.length?l.createElement("a",{href:e.media[0].url+"&pl="+e.id,title:""},e.children):l.createElement("span",null,e.children)}function S(e){const[t,i]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(e.thumb&&"string"==typeof e.thumb){const t=e.thumb.trim();i(""!==t?t:null)}else i(null)}),[e.thumb]),l.createElement("div",{className:"playlist-thumb"+(t?"":" no-thumb"),style:{backgroundImage:'url("'+t+'")'}},l.createElement(C,{id:e.id,media:e.media},l.createElement("span",null,t?l.createElement("img",{src:t,alt:""}):null,l.createElement("span",{className:"play-all"},l.createElement("span",null,l.createElement("span",null,l.createElement("i",{className:"material-icons"},"play_arrow"),l.createElement("span",{className:"play-all-label"},"PLAY ALL")))))))}function k(e){return l.createElement("div",{className:"playlist-title"},l.createElement("h1",null,e.title))}function M(e){return l.createElement("div",{className:"playlist-meta"},l.createElement("div",{className:"playlist-videos-number"},e.totalItems," media"),e.dateLabel?l.createElement("div",{className:"playlist-last-update"},e.dateLabel):null)}function L(e){return e.loggedinUserPlaylist?l.createElement("div",{className:"playlist-actions"},e.loggedinUserPlaylist?l.createElement(I,null):null):null}function R(e){return l.createElement("div",{className:"playlist-author"},l.createElement("div",null,l.createElement("div",{className:"playlist-author-thumb"},l.createElement("a",{href:e.link,title:e.name},e.thumb?l.createElement("span",{style:{backgroundImage:"url("+e.thumb+")"}},l.createElement("img",{src:e.thumb,alt:""})):l.createElement("span",null,l.createElement(E.Z,{type:"person"})))),l.createElement("div",{className:"playlist-author-name"},l.createElement("a",{href:e.link,title:e.name},e.name)),e.loggedinUserPlaylist?l.createElement(w,null):null))}function I(e){const[t,i,a]=(0,s.O)(),[n,r]=(0,l.useState)("main");return l.createElement("div",{className:"playlist-options-wrap"+("main"===n?" playlist-options-main":"")},l.createElement(a,{contentRef:t},l.createElement(p.i,null,l.createElement(E.Z,{type:"more_horiz"}))),l.createElement(i,{contentRef:t},l.createElement(A.V,{pageChangeCallback:r,initPage:"main",focusFirstItemOnPageChange:!1,pages:(o=function(){c.tH(),t.current.toggle()},d=function(){t.current.toggle()},{main:l.createElement(b.AP,null,l.createElement(P.S,{items:[{itemType:"open-subpage",text:"Delete",icon:"delete",buttonAttr:{className:"change-page","data-page-id":"proceedPlaylistRemovalPopup"}}]})),proceedPlaylistRemovalPopup:l.createElement(b.AP,null,l.createElement("div",{className:"popup-message"},l.createElement("span",{className:"popup-message-title"},"Playlist removal"),l.createElement("span",{className:"popup-message-main"},"You're willing to remove playlist permanently?")),l.createElement("hr",null),l.createElement("span",{className:"popup-message-bottom"},l.createElement("button",{className:"button-link cancel-playlist-removal",onClick:d},"CANCEL"),l.createElement("button",{className:"button-link proceed-playlist-removal",onClick:o},"PROCEED")))}),pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})));var o,d}function w(e){const[t,i,a]=(0,s.O)();function n(){t.current.toggle()}function o(e){setTimeout((function(){u.z8("Playlist updated","playlistUpdateCompleted"),n()}),100)}function d(){setTimeout((function(){u.z8("Playlist update failed","playlistUpdateFailed"),n()}),100)}function c(e){setTimeout((function(){u.z8("Playlist removed. Redirecting...","playlistDelete"),setTimeout((function(){window.location.href=r.A._currentValue.pages.playlists}),2e3)}),100)}function h(e){setTimeout((function(){u.z8("Playlist removal failed","playlistDeleteFail")}),100)}return(0,l.useEffect)((()=>(m.A.on("playlist_update_completed",o),m.A.on("playlist_update_failed",d),m.A.on("playlist_removal_completed",c),m.A.on("playlist_removal_failed",h),()=>{m.A.removeListener("playlist_update_completed",o),m.A.removeListener("playlist_update_failed",d),m.A.removeListener("playlist_removal_completed",c),m.A.removeListener("playlist_removal_failed",h)})),[]),l.createElement("div",{className:"edit-playlist"},l.createElement(a,{contentRef:t},l.createElement(p.i,null,l.createElement(E.Z,{type:"edit"}),l.createElement("span",null,"EDIT"))),l.createElement(i,{contentRef:t},l.createElement("div",{className:"popup-fullscreen"},l.createElement(b.AP,null,l.createElement("span",{className:"popup-fullscreen-overlay"}),l.createElement("div",{className:"edit-playlist-form-wrap"},l.createElement("div",{className:"edit-playlist-popup-title"},"Edit playlist",l.createElement(p.i,{type:"button",onClick:n},l.createElement(E.Z,{type:"close"}))),l.createElement(_.w,{date:(new Date).getTime(),id:m.A.get("playlistId"),onCancel:n,onPlaylistSave:function(){}}))))))}class N extends l.PureComponent{constructor(e){super(e),this.state={media:e.media},this.containerRef=l.createRef(),this.onItemsLoad=this.onItemsLoad.bind(this)}onItemsLoad(){if(!this.props.loggedinUserPlaylist)return;const e=this.containerRef.current.querySelector(".items-list");if(!e)return;const t=this.props.id;function i(e){}function a(e){}const l=function(e){return this.state.media[e]}.bind(this),s=function(e){const t=[];let i=0;for(;i<e.length;)t.push(this.state.media[e[i]]),i+=1;this.setState({media:t},(()=>{c.Sp(this.state.media)}))}.bind(this);n.Ay.create(e,{onStart:function(t){e.classList.add("on-dragging")},onEnd:function(n){const r=[],d=e.querySelectorAll(".item-order-number div div");let u,c,m,p=0;for(;p<d.length;)u=parseInt(d[p].getAttribute("data-order"),10),c=p+1,c!==u&&(m=l(u-1).friendly_token,(0,v.zi)(o.A._currentValue.playlists+"/"+t,{type:"ordering",ordering:c,media_friendly_token:m},{headers:{"X-CSRFToken":(0,v.m5)()}},!1,i,a)),r.push(u-1),d[p].setAttribute("data-order",c),d[p].innerHTML=c,p+=1;e.classList.remove("on-dragging"),s(r)}})}render(){return l.createElement("div",{ref:this.containerRef,className:"playlist-videos-list"+(this.props.loggedinUserPlaylist?" draggable":"")},this.state.media.length?l.createElement(g,{itemsLoadCallback:this.onItemsLoad,playlistId:this.props.id,media:this.state.media,hidePlaylistOptions:!this.props.loggedinUserPlaylist}):null)}}class T extends d.Y{constructor(e){super(e,"playlist-page"),this.state={thumb:m.A.get("thumb"),media:m.A.get("playlist-media"),savedPlaylist:m.A.get("saved-playlist"),loggedinUserPlaylist:m.A.get("logged-in-user-playlist"),title:m.A.get("title"),description:m.A.get("description")},this.onLoadPlaylistData=this.onLoadPlaylistData.bind(this),m.A.on("loaded_playlist_data",this.onLoadPlaylistData),this.onMediaRemovedFromPlaylist=this.onMediaRemovedFromPlaylist.bind(this),m.A.on("removed_media_from_playlist",this.onMediaRemovedFromPlaylist),this.onMediaReorderedInPlaylist=this.onMediaReorderedInPlaylist.bind(this),m.A.on("reordered_media_in_playlist",this.onMediaReorderedInPlaylist),this.onCompletePlaylistUpdate=this.onCompletePlaylistUpdate.bind(this),m.A.on("playlist_update_completed",this.onCompletePlaylistUpdate)}onCompletePlaylistUpdate(){this.setState({thumb:m.A.get("thumb"),title:m.A.get("title"),description:m.A.get("description")})}onLoadPlaylistData(){this.setState({thumb:m.A.get("thumb"),title:m.A.get("title"),description:m.A.get("description"),media:m.A.get("playlist-media"),savedPlaylist:m.A.get("saved-playlist"),loggedinUserPlaylist:m.A.get("logged-in-user-playlist")})}componentDidMount(){c.DO()}onMediaRemovedFromPlaylist(){this.setState({media:m.A.get("playlist-media"),thumb:m.A.get("thumb")})}onMediaReorderedInPlaylist(){this.setState({media:m.A.get("playlist-media"),thumb:m.A.get("thumb")})}pageContent(){const e=m.A.get("playlistId");return e?[l.createElement("div",{key:"playlistDetails",className:"playlist-details"},l.createElement(S,{id:e,thumb:this.state.thumb,media:this.state.media}),l.createElement(k,{title:this.state.title}),l.createElement(M,{totalItems:m.A.get("total-items"),dateLabel:m.A.get("date-label"),viewsCount:m.A.get("views-count")}),l.createElement(L,{loggedinUserPlaylist:this.state.loggedinUserPlaylist,savedPlaylist:this.state.savedPlaylist}),this.state.description?l.createElement("div",{className:"playlist-description"},this.state.description):null,l.createElement(R,{name:m.A.get("author-name"),link:m.A.get("author-link"),thumb:m.A.get("author-thumb"),loggedinUserPlaylist:this.state.loggedinUserPlaylist})),l.createElement(N,{key:"playlistMediaList_"+this.state.media.length,id:e,media:this.state.media,loggedinUserPlaylist:this.state.loggedinUserPlaylist})]:null}}(0,a.C)("page-playlist",T)}},i={};function a(e){var l=i[e];if(void 0!==l)return l.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,a),n.exports}a.m=t,e=[],a.O=function(t,i,l,n){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],l=e[u][1],n=e[u][2];for(var r=!0,o=0;o<i.length;o++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[o])}))?i.splice(o--,1):(r=!1,n<s&&(s=n));if(r){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,l,n]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=33,function(){var e={33:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,n,s=i[0],r=i[1],o=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(o)var u=o(a)}for(t&&t(i);d<s.length;d++)n=s[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},i=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var l=a.O(void 0,[276],(function(){return a(8856)}));l=a.O(l)}();